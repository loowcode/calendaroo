import 'package:calendaroo/widgets/fab_button.widget.dart';
import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';
import 'package:flutter_test/flutter_test.dart';

import '../wrapper-test.dart';

void main() {
  testWidgets('fabButton exists', (WidgetTester tester) async {
    final testKey = Key('K');
    await tester.pumpWidget(WrapperTest(FabButton(key: testKey)));
    var fab = find.byKey(testKey);
    expect(fab, findsOneWidget);
  });

  testWidgets('LongPress on FabButton show mini buttons',
      (WidgetTester tester) async {
    final testKey = Key('K');
    await tester.pumpWidget(WrapperTest(FabButton(key: testKey)));
    var fab = find.byKey(testKey);
    expect(fab, findsOneWidget);

    await tester.longPress(fab);

    expect(find.byIcon(Icons.flag), findsOneWidget);
    expect(find.byIcon(Icons.calendar_today), findsOneWidget);
  });
}
